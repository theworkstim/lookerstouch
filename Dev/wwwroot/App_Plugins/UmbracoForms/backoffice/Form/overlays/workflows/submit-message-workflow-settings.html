<div ng-controller="UmbracoForms.Overlays.SubmitMessageOverlayController as vm" class="umb-forms-submit-message-overlay">
  <form name="submitMessageWorkflowForm"
        novalidate
        val-form-manager
        ng-if="!vm.loading">
    <umb-editor-view>
      <umb-editor-header name="model.title"
                         name-locked="true"
                         hide-alias="true"
                         hide-icon="true"
                         hide-description="true">
      </umb-editor-header>
      <umb-editor-container>
        <umb-box>
          <umb-box-content class="form-horizontal">
            <umb-control-group localize="label,description"
                               label="@formWorkflows_messageOnSubmit"
                               description="@formWorkflows_messageOnSubmitDescription">
              <div class="umb-forms-settings-note umb-forms-settings-note-warning mb2" ng-if="model.messageOnSubmitIsHtml && !vm.htmlAvailable">
                <localize key="formEdit_fieldTypeRichTextNotAvailable"></localize>
                <a href="https://docs.umbraco.com/umbraco-forms/developer/configuration#rich-text-field-type-configuration" target="_blank"><localize key="formEdit_fieldTypeRichTextNotAvailableLinkText"></localize></a>
              </div>
              <textarea ng-show="!model.messageOnSubmitIsHtml || !vm.htmlAvailable" ng-model="model.messageOnSubmit" rows="5"></textarea>
              <umb-property-editor ng-show="model.messageOnSubmitIsHtml && vm.htmlAvailable" model="vm.messageOnSubmitHtmlEditor"></umb-property-editor>
              <div class="umb-forms-submit-message-overlay-toggle-message-format">
                <umb-toggle checked="model.messageOnSubmitIsHtml"
                            on-click="vm.toggleMessageOnSubmitIsHtml()"
                            show-labels="true"
                            label-on="{{vm.messageOnSubmitIsHtmlToggleTextOn}}"
                            label-off="{{vm.messageOnSubmitIsHtmlToggleTextOff}}"
                            label-position="right">
                </umb-toggle>
              </div>

            </umb-control-group>

            <umb-control-group localize="label,description"
                               label="@formWorkflows_goToPage"
                               description="@formWorkflows_goToPageDescription">
              <umb-forms-content-picker ng-model="model.goToPageOnSubmit">
              </umb-forms-content-picker>
            </umb-control-group>
          </umb-box-content>
        </umb-box>
      </umb-editor-container>
      <umb-editor-footer>
        <umb-editor-footer-content-right>
          <umb-button type="button"
                      button-style="link"
                      label-key="general_close"
                      shortcut="esc"
                      action="model.close()">
          </umb-button>
          <umb-button type="button"
                      button-style="success"
                      label-key="general_submit"
                      action="model.submit(model)">
          </umb-button>
        </umb-editor-footer-content-right>
      </umb-editor-footer>
    </umb-editor-view>

  </form>
</div>
